(this.webpackJsonpplanner=this.webpackJsonpplanner||[]).push([[0],{37:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(1),s=a.n(c),r=a(30),l=a.n(r),i=(a(37),a(6)),o=a(4),j=a(9),u=Object(c.createContext)({token:null,user:null});function d(){var e=Object(o.e)(),t=Object(c.useContext)(u),a=t.userData,s=t.setuserData;return a.user?Object(n.jsx)("div",{children:Object(n.jsx)("nav",{className:"nav-wrapper blue-grey darken-3",children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)(j.b,{className:"brand-logo",to:"/",children:"Planner"}),Object(n.jsxs)("ul",{id:"nav-mobile",className:"right hide-on-med-and-down",children:[Object(n.jsx)("li",{children:Object(n.jsx)(j.b,{to:"/create",children:"New Task"})}),Object(n.jsx)("li",{children:Object(n.jsx)(j.b,{to:"/me",children:"Profile"})}),Object(n.jsx)("li",{children:Object(n.jsx)("button",{className:"btn-small red",onClick:function(t){s({}),localStorage.clear(),e.push("/login")},children:"Logout"})})]})]})})}):Object(n.jsx)("div",{children:Object(n.jsx)("nav",{className:"nav-wrapper blue-grey darken-3",children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)(j.b,{className:"brand-logo",to:"/",children:"Planner"}),Object(n.jsxs)("ul",{id:"nav-mobile",className:"right hide-on-med-and-down",children:[Object(n.jsx)("li",{children:Object(n.jsx)(j.b,{to:"/",children:"Signup"})}),Object(n.jsx)("li",{children:Object(n.jsx)(j.b,{to:"/login",children:"Login"})})]})]})})})}var h=a(7),b=a(2),m=a(8),p=a.n(m),O=a(3),x=a.n(O);function f(){var e=Object(c.useState)(null),t=Object(i.a)(e,2),a=t[0],s=t[1],r=function(e){s((function(t){return Object(b.a)(Object(b.a)({},t),{},Object(h.a)({},e.target.name,e.target.value))}))},l=Object(o.e)();return Object(n.jsx)("div",{children:Object(n.jsx)("div",{className:"container card-action blue lighten-2",children:Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a&&p.a.post("https://alqubtan-planner.herokuapp.com/users/signup",a).then((function(e){x.a.toast({html:"Account has been created successfully.",classes:"green"}),l.push("/login")})).catch((function(e){if(console.log(e),e){if(e.response.data.errors)return Object.keys(e.response.data.errors).forEach((function(t){x.a.toast({html:e.response.data.errors[t].message,classes:"red"})}));x.a.toast({html:"Account already registered.",classes:"red"})}else x.a.toast({html:"Unable to create an account.",classes:"red"})}))},className:"signup-form container grey lighten-3",children:[Object(n.jsx)("h5",{className:"center",children:"Let's Create an Account"}),Object(n.jsx)("p",{className:"center",children:"Get more done with the our Tasks app."}),Object(n.jsxs)("div",{className:"input-field",children:[Object(n.jsx)("label",{htmlFor:"name",children:"Full name"}),Object(n.jsx)("input",{type:"text",name:"name",onChange:r})]}),Object(n.jsxs)("div",{className:"input-field",children:[Object(n.jsx)("label",{htmlFor:"email",children:"Email"}),Object(n.jsx)("input",{type:"email",name:"email",onChange:r})]}),Object(n.jsxs)("div",{className:"input-field",children:[Object(n.jsx)("label",{htmlFor:"password",children:"Password"}),Object(n.jsx)("input",{type:"password",name:"password",onChange:r})]}),Object(n.jsxs)("div",{className:"input-field",children:[Object(n.jsx)("label",{htmlFor:"age",children:"Age (optionally)"}),Object(n.jsx)("input",{type:"number",name:"age",onChange:r})]}),Object(n.jsx)("input",{type:"submit",value:"Create account",className:"blue lighten-2 btn"})]})})})}function g(e){var t=e.history,a=Object(c.useState)(null),s=Object(i.a)(a,2),r=s[0],l=s[1],o=Object(c.useContext)(u),j=o.userData,d=o.setuserData;Object(c.useEffect)((function(){j.user&&t.push("/home")}),[j,t]);var m=function(e){l((function(t){return Object(b.a)(Object(b.a)({},t),{},Object(h.a)({},e.target.name,e.target.value))}))};return Object(n.jsx)("div",{children:Object(n.jsx)("div",{className:"container card-action blue lighten-2",children:Object(n.jsxs)("form",{className:"signin-form container grey lighten-3",onSubmit:function(e){e.preventDefault(),r&&p.a.post("https://alqubtan-planner.herokuapp.com/users/signin",r).then((function(e){localStorage.setItem("user",JSON.stringify(e.data)),d(e.data)})).catch((function(e){e.response?x.a.toast({html:"Invaild login information.",classes:"red"}):x.a.toast({html:"Unable to login."})}))},children:[Object(n.jsx)("h5",{className:"center",children:"Login into your Account"}),Object(n.jsxs)("div",{className:"input-field",children:[Object(n.jsx)("label",{htmlFor:"email",children:"Email"}),Object(n.jsx)("input",{type:"email",name:"email",onChange:m})]}),Object(n.jsxs)("div",{className:"input-field",children:[Object(n.jsx)("label",{htmlFor:"password",children:"Password"}),Object(n.jsx)("input",{type:"password",name:"password",onChange:m})]}),Object(n.jsx)("input",{type:"submit",value:"Login",className:"btn blue lighten-2"})]})})})}function v(e){var t=e.task;return Object(n.jsx)("li",{className:"collection-item",children:Object(n.jsx)(j.b,{to:"/tasks/".concat(t._id),children:t.description})})}function N(){var e=Object(c.useContext)(u).userData,t=Object(c.useState)(void 0),a=Object(i.a)(t,2),s=a[0],r=a[1];return Object(c.useEffect)((function(){e&&p.a.get("https://alqubtan-planner.herokuapp.com/tasks/",{headers:{ContentType:"application/json",Authorization:"Bearer "+JSON.parse(localStorage.getItem("user")).token}}).then((function(e){r(e.data)})).catch((function(e){x.a.toast({html:"Task not found",classes:"red"})}))})),void 0===e.user?"":Object(n.jsx)("div",{className:"container tasks-section",children:Object(n.jsx)("div",{className:"card",children:Object(n.jsxs)("div",{className:"card-content",children:[Object(n.jsxs)("div",{children:["Welcome, it's awesome to see you again ",e.user.name]}),Object(n.jsx)("ul",{className:"collection with-header",children:s?Object(n.jsxs)("div",{className:"collection-header",children:[Object(n.jsx)("h5",{children:"You have some Todo's here"}),s.map((function(e){return Object(n.jsx)(v,{task:e},e._id)}))]}):Object(n.jsx)("div",{className:"collection-header",children:Object(n.jsx)("h5",{children:"No Todo's left."})})})]})})})}function k(){return Object(n.jsx)("div",{children:Object(n.jsx)(N,{})})}function S(e){var t=Object(c.useState)(""),a=Object(i.a)(t,2),s=a[0],r=a[1],l=Object(c.useContext)(u).userData,o=Object(c.useState)({description:s.description,completed:!1}),j=Object(i.a)(o,2),d=j[0],m=j[1];Object(c.useEffect)((function(){var t=!0,a=e.match.params.id;if(a)return p.a.get("https://alqubtan-planner.herokuapp.com/tasks/".concat(a),{headers:{ContentType:"application/json",Authorization:"Bearer "+JSON.parse(localStorage.getItem("user")).token}}).then((function(e){t&&r(e.data)})).catch((function(){e.history.push("/")})),function(){t=!1}}),[e]);return s?Object(n.jsx)("div",{className:"container task-form",children:Object(n.jsxs)("div",{className:"card",children:[Object(n.jsxs)("div",{className:"card-content",children:[Object(n.jsx)("label",{htmlFor:"description",children:"Description: "}),Object(n.jsxs)("p",{name:"description",children:['"',s.description,'"']}),Object(n.jsx)("label",{htmlFor:"completed",children:"Completed: "}),Object(n.jsx)("p",{name:"completed",children:s.completed.toString()}),Object(n.jsx)("label",{htmlFor:"createdAt",children:"Created at"}),Object(n.jsx)("p",{name:"createdAt",children:s.createdAt}),Object(n.jsx)("label",{htmlFor:"author",children:"Author"}),Object(n.jsx)("p",{name:"author",children:l.user.name})]}),Object(n.jsxs)("form",{className:"card-content z-depth-2",onSubmit:function(t){t.preventDefault();var a=e.match.params.id;a&&p.a.patch("https://alqubtan-planner.herokuapp.com/tasks/".concat(a),d,{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("user")).token}}).then((function(t){x.a.toast({html:"Task updates successfuly",classes:"green"}),e.history.push("/")})).catch((function(e){x.a.toast({html:"Something went wrong.",classes:"red"})}))},children:[Object(n.jsx)("label",{htmlFor:"description",children:"Description :"}),Object(n.jsx)("input",{type:"text",placeholder:"Update your task description",name:"description",onChange:function(e){m((function(t){return Object(b.a)(Object(b.a)({},t),{},Object(h.a)({},e.target.name,e.target.value))}))}}),Object(n.jsx)("p",{children:Object(n.jsxs)("label",{children:[Object(n.jsx)("input",{type:"checkbox",onChange:function(e){e.target.checked?m((function(t){return Object(b.a)(Object(b.a)({},t),{},Object(h.a)({},e.target.name,!0))})):m((function(t){return Object(b.a)(Object(b.a)({},t),{},Object(h.a)({},e.target.name,!1))}))},name:"completed"}),Object(n.jsx)("span",{children:"Completed"})]})}),Object(n.jsx)("br",{}),Object(n.jsx)("input",{type:"submit",value:"Update",className:"waves-effect waves-light btn btn-margin"}),Object(n.jsx)("input",{type:"submit",value:"Delete",className:"waves-effect waves-light btn red",onClick:function(t){t.preventDefault();var a=s._id;s&&p.a.delete("https://alqubtan-planner.herokuapp.com/tasks/".concat(a),{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("user")).token}}).then((function(t){x.a.toast({html:"Task deleted successfuly",classes:"red"}),e.history.push("/")})).catch((function(e){x.a.toast({html:"Something went wrong.",classes:"red"})}))}})]})]})}):Object(n.jsx)("div",{className:"card-content center",children:Object(n.jsx)("p",{children:"Loading..."})})}function y(){var e=Object(o.e)(),t=Object(c.useState)({description:null,completed:!1}),a=Object(i.a)(t,2),s=a[0],r=a[1],l=function(t){t.preventDefault(),s&&p.a.post("https://alqubtan-planner.herokuapp.com/tasks/create",s,{headers:{ContentType:"application/json",Authorization:"Bearer "+JSON.parse(localStorage.getItem("user")).token}}).then((function(t){x.a.toast({html:"Task created successfully",classes:"green"}),e.push("/home")})).catch((function(e){x.a.toast({html:"Task did not created",classes:"red"})}))};return Object(n.jsx)("div",{className:"container addTask-section",children:Object(n.jsx)("div",{className:"card",children:Object(n.jsxs)("div",{className:"card-content",children:[Object(n.jsx)("p",{className:"center",children:"Create new Task"}),Object(n.jsxs)("form",{onSubmit:l,children:[Object(n.jsx)("label",{htmlFor:"description",children:"Description"}),Object(n.jsx)("input",{type:"text",name:"description",onChange:function(e){r((function(t){return Object(b.a)(Object(b.a)({},t),{},Object(h.a)({},e.target.name,e.target.value))}))}}),Object(n.jsx)("div",{className:"card-content",children:Object(n.jsx)("p",{children:Object(n.jsxs)("label",{children:[Object(n.jsx)("input",{type:"checkbox",onChange:function(e){e.target.checked?r((function(t){return Object(b.a)(Object(b.a)({},t),{},Object(h.a)({},e.target.name,!0))})):r((function(t){return Object(b.a)(Object(b.a)({},t),{},Object(h.a)({},e.target.name,!1))}))},name:"completed"}),Object(n.jsx)("span",{children:"Completed"})]})})}),Object(n.jsx)("input",{type:"submit",value:"Create",className:"btn",onChange:l})]})]})})})}function w(){var e=Object(c.useContext)(u).setuserData,t=Object(o.e)(),a=Object(c.useState)(""),s=Object(i.a)(a,2),r=s[0],l=s[1],j=Object(c.useState)(""),d=Object(i.a)(j,2),m=d[0],O=d[1];Object(c.useEffect)((function(){p.a.get("https://alqubtan-planner.herokuapp.com/me",{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("user")).token}}).then((function(e){l(e.data)})).catch((function(e){console.log(e)}))}),[]);var f=function(e){O((function(t){return Object(b.a)(Object(b.a)({},t),{},Object(h.a)({},e.target.id,e.target.files?e.target.files[0]:e.target.value))}))};return r?Object(n.jsx)("div",{className:"container profile-section",children:Object(n.jsx)("div",{className:"card",children:Object(n.jsxs)("div",{className:"card-content",children:[Object(n.jsx)("p",{className:"center",children:"Account Informations"}),Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),m&&p.a.patch("https://alqubtan-planner.herokuapp.com/me",m,{headers:{Authorization:"Bearer "+JSON.parse(localStorage.getItem("user")).token}}).then((function(e){x.a.toast({html:"Updated successfuly.",classes:"green"}),t.push("/")})).catch((function(e){x.a.toast({html:"Something went worng",classes:"red"})}))},children:[Object(n.jsx)("label",{htmlFor:"name",children:"Update name"}),Object(n.jsx)("input",{type:"text",name:"name",id:"name",defaultValue:r.name,onChange:f}),Object(n.jsx)("label",{htmlFor:"email",children:"Update Email"}),Object(n.jsx)("input",{type:"email",name:"email",id:"email",defaultValue:r.email,onChange:f}),Object(n.jsx)("label",{htmlFor:"age",children:"Update Age"}),Object(n.jsx)("input",{type:"number",name:"age",id:"age",defaultValue:r.age,onChange:f}),Object(n.jsx)("label",{htmlFor:"password",children:"Update Password"}),Object(n.jsx)("input",{type:"password",name:"password",id:"password",onChange:f}),Object(n.jsx)("input",{type:"submit",value:"Save chanages",className:"waves-effect waves-light btn"})]}),Object(n.jsx)("p",{className:"center",children:"Delete user profile"}),Object(n.jsx)("form",{action:"",onSubmit:function(a){a.preventDefault(),p.a.delete("https://alqubtan-planner.herokuapp.com/me",{headers:{Authorization:JSON.parse(localStorage.getItem("user")).token}}).then((function(a){localStorage.clear(),e(""),t.push("/")})).catch((function(e){x.a.toast({html:"Something went wrong",classes:"red"})}))},children:Object(n.jsx)("input",{type:"submit",value:"delete profile",className:"waves-effect waves-light red btn"})})]})})}):Object(n.jsx)("div",{className:"card-content center",children:Object(n.jsx)("p",{children:"Loading..."})})}var C=function(){var e=Object(c.useContext)(u),t=e.userData,a=e.setuserData,s=Object(o.e)();return Object(c.useEffect)((function(){var e=JSON.parse(localStorage.getItem("user"));e?(a(e),s.push(s.location.pathname||"/home")):s.push("/login")}),[a,s]),Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(d,{}),Object(n.jsx)(o.a,{path:"/",exact:!0,component:t.user?k:f}),Object(n.jsx)(o.a,{path:"/login",exact:!0,component:g}),Object(n.jsx)(o.a,{path:"/home",component:k}),Object(n.jsx)(o.a,{path:"/tasks/:id",component:S}),Object(n.jsx)(o.a,{path:"/create",component:y}),Object(n.jsx)(o.a,{path:"/me",component:w})]})};var D=function(){var e=Object(c.useState)({token:void 0,user:void 0}),t=Object(i.a)(e,2),a=t[0],s=t[1];return Object(n.jsx)(j.a,{children:Object(n.jsx)(u.Provider,{value:{userData:a,setuserData:s},children:Object(n.jsx)(C,{})})})},F=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,60)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),s(e),r(e)}))};l.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(D,{})}),document.getElementById("root")),F()}},[[59,1,2]]]);
//# sourceMappingURL=main.08512833.chunk.js.map